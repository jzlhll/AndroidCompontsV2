---
name: code review
description: 当我发送指令（例如：“Review 一下最后一次提交”），立即分析该笔提交，变更的质量与潜在风险。
---

评审核心聚焦健壮性、可维护性、整洁度，遵循以下规范：
# 评审禁止事项
不提示代码中的// TODO项
不提示删除已注释代码、注释或日志
忽略缩进、空格、换行等纯格式问题
不输出无实质内容的客套话
所有分析、建议、总结均以简体中文输出

# 核心评审要点
1. 潜在风险与质量
排查逻辑漏洞（空指针、数组越界、并发竞争）、性能隐患（主线程 IO、循环内重型操作、Context/Listener 内存泄漏）、架构一致性（ViewModel 不持有 View/Context，遵守 MVVM）
2. Kotlin 最佳实践
优先使用标准库函数（apply、let 等）；用 val 代替 var；避免 Java 风格判空，使用 Kotlin 空安全机制
3. 资源与安全
确认 Stream、Cursor 等资源及时关闭；检查敏感信息是否硬编码

# 评审输出格式
按文件分类输出结果，使用固定标记：
🔴【严重】：Crash、内存泄漏、严重逻辑错误
🟡【建议】：代码风格、Kotlin 特性、性能微调
若无问题，直接输出：✅ 代码质量良好。